import org.apache.tools.ant.taskdefs.condition.Os

plugins {
  id 'de.muspellheim.java-application-conventions'
  id 'de.muspellheim.java-module-conventions'
  id 'de.muspellheim.java-self-contained-application-conventions'
  id 'org.openjfx.javafxplugin' version '0.0.13'
}

dependencies {
  implementation project(':activitysampling-domain')
  implementation project(':activitysampling-infrastructure')
  implementation 'org.apache.commons:commons-text:1.10.0'
  //testImplementation project(path: ':activitysampling-domain', configuration: 'tests')
}

application {
  mainModule = 'de.muspellheim.activitysampling.application'
  mainClass = 'de.muspellheim.activitysampling.application.App'
}

javafx {
  version = "19"
  modules = ['javafx.controls', 'javafx.fxml']
}

if (Os.isFamily(Os.FAMILY_MAC)) {
  jlink {
    jpackage {
      imageName = 'Activity Sampling'
    }
  }
}

if (Os.isFamily(Os.FAMILY_WINDOWS)) {
  jlink {
    jpackage {
      imageName = 'Activity Sampling'
      installerName = 'activity-sampling'
      installerOptions += [
        '--win-upgrade-uuid', '2b558ea6-156a-4079-a351-f2cf6af85db5'
      ]
    }
  }
}
